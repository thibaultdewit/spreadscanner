# Intro

DDEX official nodejs api sdk

# Set up web3

DDEX is 0x based, So you need set up a web3 instance for ddex api. 

The version of Web3 is 0.20.2.

### have got a ethereum node

If you have your own ethereum nodes to manage your accounts, you can use `Web3.providers.HttpProvider` or `Web3.providers.IpcProvider`.

Be careful wheh using HttpProvider, **DO NOT** give your node rpc public access, or you may(will) lost all the money in the accounts that were unlocked.

```javascript
const Web3 = require('web3')
const web3 = new Web3(new Web3.providers.HttpProvider('https://mainnet.infura.io'))
```

### no private ethereum node

ZeroClientProvider sign all your transactions and contract calls locally, then use `eth_sendRawTransaction` to publish  ethereum nodes. This is the recommended way to use web3 and ddex-api.

```javascript
const Web3 = require('web3')
const { ZeroClientProvider } = require('ddex-api')

const accounts = ["0x5409ED021D92998bf6814279A6A1411A7e866A631"]
const privateKeys = {
  "0x5409ED021D9299bf6814279A6A1411A7e866A631": "f2f48ee19680706196e2e339e5da3491186e0c4c5030670656b0e0164837257d"
}

const web3 = new Web3(ZeroClientProvider({
  rpcUrl: 'https://mainnet.infura.io',
  getAccounts: function(cb) { cb(null, accounts) },
  getPrivateKey: function(address, cb) { cb(null, privateKeys[address]) }
}))
```

# Usage

### basic

```javascript
const Web3 = require("web3")
const { ZeroEx } = require("0x.js")
const { DDEXApi } = require("ddex-api")

const web3 = new Web3(new Web3.providers.HttpProvider('https://mainnet.infura.io'))
const zeroEx = new ZeroEx(web3.currentProvider, { networkId: 1 })

const api = new DDEXApi({
  serverURL: "https://api.ddex.io",
  apiVersion: "v1",
  zeroEx,
  relayer: "0x5409ed021d9299bf6814279a6a1411a7e866a631",
})
```

# Methods

All methods return a promise

### account info

```javascript
api.getAccount("0x5409ed021d9299bf6814279a6a1411a7e866a631")
```

### get OrderBook snapshot

```javascript
api.getBook('ZRX-ETH')
```

### get Tokens

```javascript
api.getTokens()
```

### get Account Trades
```javascript
const account = '0x5409ed021d9299bf6814279a6a1411a7e866a631'
api.getTrades(account, 'ZRX-ETH')
```

### get All Trades for special pair
```javascript
api.getAllTrades('ZRX-ETH')
```

### get Orders
```javascript
const account = '0x5409ed021d9299bf6814279a6a1411a7e866a631'
api.getOrders('ZRX-ETH').then(console.log)
```